name: Simple Check

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  check:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Count files
      run: |
        echo "ğŸ“ æ–‡ä»¶ç»Ÿè®¡:"
        echo "æ€»æ–‡ä»¶æ•°: $(find . -type f | wc -l)"
        echo "Pythonæ–‡ä»¶: $(find . -name '*.py' | wc -l)"
        echo "TypeScriptæ–‡ä»¶: $(find . -name '*.ts' -o -name '*.tsx' | wc -l)"
        echo "é…ç½®æ–‡ä»¶: $(find . -name '*.json' -o -name '*.yml' -o -name '*.yaml' | wc -l)"
    
    - name: Check key files
      run: |
        echo "ğŸ”‘ å…³é”®æ–‡ä»¶æ£€æŸ¥:"
        
        key_files=(
          "README.md"
          ".gitignore"
          "LICENSE"
          "docker-compose.yml"
          "backend/requirements.txt"
          "backend/main.py"
          "frontend/package.json"
          "frontend/src/app/page.tsx"
        )
        
        all_ok=true
        for file in "${key_files[@]}"; do
          if [ -f "$file" ]; then
            size=$(wc -c < "$file")
            if [ "$size" -gt 10 ]; then
              echo "âœ… $file (${size} bytes)"
            else
              echo "âš ï¸  $file å¤ªå° (${size} bytes)"
              all_ok=false
            fi
          else
            echo "âŒ $file ä¸å­˜åœ¨"
            all_ok=false
          fi
        done
        
        if [ "$all_ok" = true ]; then
          echo "ğŸ‰ æ‰€æœ‰å…³é”®æ–‡ä»¶æ£€æŸ¥é€šè¿‡ï¼"
        else
          echo "âš ï¸  éƒ¨åˆ†æ–‡ä»¶æœ‰é—®é¢˜"
          exit 0  # å³ä½¿æœ‰é—®é¢˜ä¹Ÿä¸å¤±è´¥ï¼Œåªæ˜¯è­¦å‘Š
        fi
